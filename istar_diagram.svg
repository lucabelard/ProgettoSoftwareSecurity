<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="2400" height="1800" viewBox="0 0 2400 1800">
  <!-- Background -->
  <rect width="2400" height="1800" fill="#f5f5f5"/>
  
  <!-- Definizioni -->
  <defs>
    <style>
      .actor-circle { fill: #d4edda; stroke: #0d5c2e; stroke-width: 3; }
      .actor-text { fill: #000; font-family: Arial, sans-serif; font-size: 28px; font-weight: bold; text-anchor: middle; }
      .dep-shape { fill: #d4edda; stroke: #0d5c2e; stroke-width: 2; }
      .dep-text { fill: #000; font-family: Arial, sans-serif; font-size: 16px; text-anchor: middle; }
      .connector { stroke: #0d5c2e; stroke-width: 2; stroke-dasharray: 8,4; fill: none; }
      .arrow { fill: #0d5c2e; }
    </style>
    
    <!-- Marker per le frecce -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" class="arrow"/>
    </marker>
  </defs>
  
  <!-- ATTORI -->
  
  <!-- Mittente (top left) -->
  <circle cx="300" cy="250" r="120" class="actor-circle"/>
  <text x="300" y="265" class="actor-text">Mittente</text>
  
  <!-- Corriere (top right) -->
  <circle cx="2100" cy="250" r="120" class="actor-circle"/>
  <text x="2100" y="265" class="actor-text">Corriere</text>
  
  <!-- Sistema_Blockchain (center) -->
  <circle cx="1200" cy="900" r="150" class="actor-circle"/>
  <text x="1200" y="905" class="actor-text">Sistema_</text>
  <text x="1200" y="935" class="actor-text">Blockchain</text>
  
  <!-- Sensore (bottom left) -->
  <circle cx="300" cy="1550" r="120" class="actor-circle"/>
  <text x="300" y="1565" class="actor-text">Sensore</text>
  
  <!-- Admin (bottom right) -->
  <circle cx="2100" cy="1550" r="120" class="actor-circle"/>
  <text x="2100" y="1565" class="actor-text">Admin</text>
  
  <!-- DIPENDENZE MITTENTE -> SISTEMA_BLOCKCHAIN -->
  
  <!-- 1. Creazione Spedizione [TASK] - Esagono -->
  <polygon points="750,400 825,425 825,475 750,500 675,475 675,425" class="dep-shape"/>
  <text x="750" y="455" class="dep-text">Creazione</text>
  <text x="750" y="475" class="dep-text">Spedizione</text>
  <line x1="420" y1="250" x2="675" y2="450" class="connector" marker-end="url(#arrowhead)"/>
  <line x1="825" y1="450" x2="1050" y2="900" class="connector"/>
  
  <!-- 2. Validazione Evidenze [GOAL] - Ovale -->
  <ellipse cx="750" cy="600" rx="90" ry="40" class="dep-shape"/>
  <text x="750" y="605" class="dep-text">Validazione</text>
  <text x="750" y="625" class="dep-text">Evidenze</text>
  <line x1="400" y1="350" x2="660" y2="600" class="connector" marker-end="url(#arrowhead)"/>
  <line x1="840" y1="600" x2="1070" y2="850" class="connector"/>
  
  <!-- 3. Pagamento Automatico [TASK] - Esagono -->
  <polygon points="750,700 825,725 825,775 750,800 675,775 675,725" class="dep-shape"/>
  <text x="750" y="755" class="dep-text">Pagamento</text>
  <text x="750" y="775" class="dep-text">Automatico</text>
  <line x1="380" y1="370" x2="675" y2="750" class="connector" marker-end="url(#arrowhead)"/>
  <line x1="825" y1="750" x2="1050" y2="900" class="connector"/>
  
  <!-- 4. Tracciabilità Immutabile [SOFTGOAL] - Nuvola -->
  <path d="M 650,900 Q 640,870 665,865 Q 670,850 695,855 Q 710,840 735,850 Q 760,840 775,855 Q 800,850 805,865 Q 830,870 820,900 Q 820,925 795,930 Q 790,945 765,940 Q 750,955 725,945 Q 700,955 685,940 Q 660,945 655,930 Q 640,925 650,900 Z" class="dep-shape"/>
  <text x="735" y="905" class="dep-text" font-size="14">Tracciabilità</text>
  <text x="735" y="925" class="dep-text" font-size="14">Immutabile</text>
  <line x1="360" y1="370" x2="650" y2="900" class="connector" marker-end="url(#arrowhead)"/>
  <line x1="820" y1="900" x2="1050" y2="900" class="connector"/>
  
  <!-- DIPENDENZE CORRIERE -> SISTEMA_BLOCKCHAIN -->
  
  <!-- 5. Registrazione Consegna [TASK] - Esagono -->
  <polygon points="1650,400 1725,425 1725,475 1650,500 1575,475 1575,425" class="dep-shape"/>
  <text x="1650" y="455" class="dep-text">Registrazione</text>
  <text x="1650" y="475" class="dep-text">Consegna</text>
  <line x1="1980" y1="250" x2="1725" y2="450" class="connector" marker-end="url(#arrowhead)"/>
  <line x1="1575" y1="450" x2="1350" y2="900" class="connector"/>
  
  <!-- 6. Ricezione Pagamento [GOAL] - Ovale -->
  <ellipse cx="1650" cy="600" rx="90" ry="40" class="dep-shape"/>
  <text x="1650" y="605" class="dep-text">Ricezione</text>
  <text x="1650" y="625" class="dep-text">Pagamento</text>
  <line x1="2000" y1="350" x2="1740" y2="600" class="connector" marker-end="url(#arrowhead)"/>
  <line x1="1560" y1="600" x2="1330" y2="850" class="connector"/>
  
  <!-- 7. Prova di Conformità [RESOURCE] - Rettangolo -->
  <rect x="1575" y="700" width="150" height="60" class="dep-shape"/>
  <text x="1650" y="725" class="dep-text">Prova di</text>
  <text x="1650" y="745" class="dep-text">Conformità</text>
  <line x1="2020" y1="370" x2="1725" y2="730" class="connector" marker-end="url(#arrowhead)"/>
  <line x1="1575" y1="730" x2="1350" y2="900" class="connector"/>
  
  <!-- DIPENDENZE SENSORE -> SISTEMA_BLOCKCHAIN -->
  
  <!-- 8. Invio Dati Ambientali [TASK] - Esagono -->
  <polygon points="750,1150 825,1175 825,1225 750,1250 675,1225 675,1175" class="dep-shape"/>
  <text x="750" y="1205" class="dep-text">Invio Dati</text>
  <text x="750" y="1225" class="dep-text">Ambientali</text>
  <line x1="420" y1="1550" x2="675" y2="1212" class="connector" marker-end="url(#arrowhead)"/>
  <line x1="825" y1="1212" x2="1050" y2="950" class="connector"/>
  
  <!-- 9. Timestamp Certificato [RESOURCE] - Rettangolo -->
  <rect x="675" y="1300" width="150" height="60" class="dep-shape"/>
  <text x="750" y="1325" class="dep-text">Timestamp</text>
  <text x="750" y="1345" class="dep-text">Certificato</text>
  <line x1="400" y1="1480" x2="675" y2="1330" class="connector" marker-end="url(#arrowhead)"/>
  <line x1="825" y1="1330" x2="1070" y2="1000" class="connector"/>
  
  <!-- DIPENDENZE ADMIN -> SISTEMA_BLOCKCHAIN -->
  
  <!-- 10. Gestione Ruoli [TASK] - Esagono -->
  <polygon points="1650,1150 1725,1175 1725,1225 1650,1250 1575,1225 1575,1175" class="dep-shape"/>
  <text x="1650" y="1205" class="dep-text">Gestione</text>
  <text x="1650" y="1225" class="dep-text">Ruoli</text>
  <line x1="1980" y1="1550" x2="1725" y2="1212" class="connector" marker-end="url(#arrowhead)"/>
  <line x1="1575" y1="1212" x2="1350" y2="950" class="connector"/>
  
  <!-- 11. Validazione Manuale Evidenze [TASK] - Esagono -->
  <polygon points="1650,1300 1725,1325 1725,1375 1650,1400 1575,1375 1575,1325" class="dep-shape"/>
  <text x="1650" y="1350" class="dep-text" font-size="14">Validazione</text>
  <text x="1650" y="1370" class="dep-text" font-size="14">Manuale Evidenze</text>
  <line x1="2000" y1="1480" x2="1725" y2="1362" class="connector" marker-end="url(#arrowhead)"/>
  <line x1="1575" y1="1362" x2="1330" y2="1000" class="connector"/>
  
  <!-- DIPENDENZE SISTEMA_BLOCKCHAIN -> ADMIN -->
  
  <!-- 12. Approvazione Evidenze [GOAL] - Ovale -->
  <ellipse cx="1730" cy="1220" rx="90" ry="40" class="dep-shape"/>
  <text x="1730" y="1225" class="dep-text">Approvazione</text>
  <text x="1730" y="1245" class="dep-text">Evidenze</text>
  <line x1="1330" y1="1000" x2="1640" y2="1220" class="connector"/>
  <line x1="1820" y1="1220" x2="1980" y2="1500" class="connector" marker-end="url(#arrowhead)"/>
  
  <!-- 13. Configurazione Sistema [TASK] - Esagono -->
  <polygon points="1800,1400 1875,1425 1875,1475 1800,1500 1725,1475 1725,1425" class="dep-shape"/>
  <text x="1800" y="1455" class="dep-text">Configurazione</text>
  <text x="1800" y="1475" class="dep-text">Sistema</text>
  <line x1="1340" y1="1030" x2="1725" y2="1450" class="connector"/>
  <line x1="1875" y1="1450" x2="1980" y2="1520" class="connector" marker-end="url(#arrowhead)"/>
  
  <!-- DIPENDENZE SISTEMA_BLOCKCHAIN -> SENSORE -->
  
  <!-- 14. Dati Affidabili [SOFTGOAL] - Nuvola -->
  <path d="M 550,1220 Q 540,1190 565,1185 Q 570,1170 595,1175 Q 610,1160 635,1170 Q 660,1160 675,1175 Q 700,1170 705,1185 Q 730,1190 720,1220 Q 720,1245 695,1250 Q 690,1265 665,1260 Q 650,1275 625,1265 Q 600,1275 585,1260 Q 560,1265 555,1250 Q 540,1245 550,1220 Z" class="dep-shape"/>
  <text x="635" y="1225" class="dep-text" font-size="14">Dati</text>
  <text x="635" y="1245" class="dep-text" font-size="14">Affidabili</text>
  <line x1="1070" y1="1000" x2="720" y2="1220" class="connector"/>
  <line x1="550" y1="1220" x2="420" y2="1500" class="connector" marker-end="url(#arrowhead)"/>
  
  <!-- 15. Letture Ambientali [RESOURCE] - Rettangolo -->
  <rect x="550" y="1350" width="150" height="60" class="dep-shape"/>
  <text x="625" y="1375" class="dep-text">Letture</text>
  <text x="625" y="1395" class="dep-text">Ambientali</text>
  <line x1="1070" y1="1020" x2="700" y2="1380" class="connector"/>
  <line x1="550" y1="1380" x2="420" y2="1520" class="connector" marker-end="url(#arrowhead)"/>
  
  <!-- DIPENDENZE SISTEMA_BLOCKCHAIN -> CORRIERE -->
  
  <!-- 16. Conferma Consegna [RESOURCE] - Rettangolo -->
  <rect x="1575" y="850" width="150" height="60" class="dep-shape"/>
  <text x="1650" y="875" class="dep-text">Conferma</text>
  <text x="1650" y="895" class="dep-text">Consegna</text>
  <line x1="1330" y1="880" x2="1575" y2="880" class="connector"/>
  <line x1="1725" y1="880" x2="1980" y2="370" class="connector" marker-end="url(#arrowhead)"/>
  
  <!-- DIPENDENZE MITTENTE <-> CORRIERE -->
  
  <!-- 17. Consegna Fisica Merce [GOAL] - Ovale -->
  <ellipse cx="1200" cy="150" rx="110" ry="40" class="dep-shape"/>
  <text x="1200" y="150" class="dep-text">Consegna Fisica</text>
  <text x="1200" y="170" class="dep-text">Merce</text>
  <line x1="420" y1="230" x2="1090" y2="150" class="connector"/>
  <line x1="1310" y1="150" x2="1980" y2="230" class="connector" marker-end="url(#arrowhead)"/>
  
  <!-- 18. Informazioni Destinatario [RESOURCE] - Rettangolo -->
  <rect x="1125" y="50" width="150" height="60" class="dep-shape"/>
  <text x="1200" y="75" class="dep-text">Informazioni</text>
  <text x="1200" y="95" class="dep-text">Destinatario</text>
  <line x1="1980" y1="200" x2="1275" y2="80" class="connector"/>
  <line x1="1125" y1="80" x2="420" y2="200" class="connector" marker-end="url(#arrowhead)"/>
  
</svg>
